<div style="position:fixed;bottom:0;width: 30%;margin-left: 10px;overflow-y: auto;max-height: 90%;">
    <div class="fixed-dashboard-left">
        <mat-accordion>
            <mat-expansion-panel hideToggle expanded="true">
                <mat-expansion-panel-header>
                <mat-panel-title>
                    <mat-icon>device_hub</mat-icon> Hub connection
                </mat-panel-title>
                <mat-panel-description>
                    
                </mat-panel-description>
                </mat-expansion-panel-header>
                <mat-card class="full-content-card">
                    <mat-card-content>
                        <mat-form-field appearance="standard" color="accent">
                            <mat-label>Logs</mat-label>
                            <textarea matInput rows="8" readonly>{{logText}}</textarea>
                        </mat-form-field>
                        <mat-form-field appearance="standard" color="accent">
                            <mat-label>Game code</mat-label>
                            <input matInput type="text" readonly [value]="gameCode">
                        </mat-form-field>                        </mat-card-content>
                    <mat-card-actions align="end" class="dialog-buttons">
                        <button mat-raised-button color="primary" (click)="connectToHub()" [disabled]="!canConnect">
                            Connect
                        </button>
                        <button mat-raised-button color="primary" (click)="disconnectFromHub()" [disabled]="!canDisconnect">
                            Disconnect
                        </button>
                    </mat-card-actions>
                </mat-card>
            </mat-expansion-panel>
        </mat-accordion>
        <mat-accordion>
            <mat-expansion-panel hideToggle expanded="true">
                <mat-expansion-panel-header>
                <mat-panel-title>
                    <mat-icon>group</mat-icon> Player state
                </mat-panel-title>
                <mat-panel-description>
                    
                </mat-panel-description>
                </mat-expansion-panel-header>
                <p>states</p>
            </mat-expansion-panel>
        </mat-accordion>
        <mat-accordion>
            <mat-expansion-panel hideToggle>
                <mat-expansion-panel-header>
                <mat-panel-title>
                    <mat-icon>theaters</mat-icon> Go to scene
                </mat-panel-title>
                <mat-panel-description>
                    
                </mat-panel-description>
                </mat-expansion-panel-header>
                <button class="command-button" *ngFor="let scene of gameState.story.storyScenes" mat-raised-button color="primary" (click)="goToScene(scene)">
                    {{scene.title}}
                </button>
            </mat-expansion-panel>
        </mat-accordion>
        <mat-accordion>
            <mat-expansion-panel hideToggle>
                <mat-expansion-panel-header>
                <mat-panel-title>
                    <mat-icon>search</mat-icon> Find image, audio, text, command
                </mat-panel-title>
                <mat-panel-description>
                    
                </mat-panel-description>
                </mat-expansion-panel-header>
                <p>WIP</p>
            </mat-expansion-panel>

        </mat-accordion>
    </div>
</div>
<app-loader-overlay [formComponent]="this"></app-loader-overlay>
<div fxLayout="row" fxLayoutAlign="center center">
    <app-form-errors class="full-content" [formComponent]="this"></app-form-errors>
</div>
<div fxLayout="row" fxLayoutAlign="center top">
    <div fxFlex="40%">
        &nbsp;
    </div>
    <div fxFlex="60%">
        <mat-card class="full-content-card">
            <mat-card-header>
                <mat-card-title>{{gameState.story.title}}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <pre>{{gameState.story.description}}</pre>
            </mat-card-content>
        </mat-card>

        <mat-card class="full-content-card" *ngFor="let scene of gameState.story.storyScenes">
            <mat-card-header>
                <mat-card-title [id]="scenePrefix + scene.id">{{scene.title}}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <table style="width: 100%;">
                    <tbody>
                        <tr *ngFor="let cmd of scene.storySceneCommands">
                            <td style="padding-top:7px;padding-bottom: 7px;border-bottom: 1px #303030 dashed;">
                                <button mat-raised-button color="primary" (click)="sendCommand(scene)" style="width: 100%;text-align: left;">
                                    {{cmd.title}}
                                </button>
                            </td>
                            <td style="width: 80%;padding-top:7px;padding-bottom: 7px;border-bottom: 1px #303030 dashed;">
                                <div *ngIf="cmd.texts">
                                    <i>Show text:</i> {{cmd.texts | cutText:120 | convertToBr:'. '}}
                                </div>
                                <div *ngIf="cmd.images && cmd.images.length > 0">
                                    <i>Show image: </i> {{cmd.images[0].name}}
                                </div>
                                <div *ngIf="cmd.audios && cmd.audios.length > 0">
                                    <i>Play audio: </i> <span *ngFor="let audio of cmd.audios">{{audio.name}}</span>, &nbsp;
                                </div>
                                <div *ngIf="cmd.timers && cmd.timers.length > 0">
                                    <i>Start timer: </i> {{cmd.timers[0]}}s
                                </div>
                                <div *ngIf="cmd.minigames && cmd.minigames.length > 0">
                                    <i>Play minigame: </i> Yes
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </mat-card-content>
        </mat-card>
    </div>
</div>
